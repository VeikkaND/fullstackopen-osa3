{"ast":null,"code":"import _slicedToArray from\"C:/Users/Veikka/Desktop/yliopisto/fullstackopen/fullstackopen/osa2/puhelinluettelo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Names from'./components/names';import Filter from'./components/filter';import AddNew from'./components/addNew';import numberService from'./components/numbers';import Notification from'./components/Notification';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newFilter=_useState8[0],setNewFilter=_useState8[1];var _useState9=useState(persons),_useState10=_slicedToArray(_useState9,2),namesToShow=_useState10[0],setNamesToShow=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),notiMessage=_useState12[0],setNotiMessage=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),notiPerson=_useState14[0],setNotiPerson=_useState14[1];useEffect(function(){numberService.getAll().then(function(numbers){setPersons(numbers);setNamesToShow(numbers);});},[]);var nameExists=function nameExists(name,originalName){if(window.confirm(\"\".concat(name.name,\" has already been added to phonebook,\\n              replace the old number with a new one?\"))){numberService.update(name,originalName.id).then(numberService.getAll().then(function(names){setPersons(names);setNamesToShow(names);setNotiMessage(\"Updated\");setNotiPerson(name.name);setTimeout(function(){setNotiMessage(null);},3000);}));}};var addName=function addName(event){event.preventDefault();var name={name:newName,number:newNumber};persons.map(function(name){return name.name;}).includes(newName)?nameExists(name,persons.find(function(n){return n.name==newName;})):numberService.create(name).then(function(addedNumber){setPersons(persons.concat(addedNumber));setNamesToShow(persons.concat(addedNumber));{/* add names to filtering */}setNotiMessage(\"Added\");setNotiPerson(name.name);setTimeout(function(){setNotiMessage(null);},3000);});};var handleFiltering=function handleFiltering(event){setNewFilter(event.target.value.toLowerCase());if(event.target.value==\"\"){setNamesToShow(persons);}else{setNamesToShow(persons.filter(function(name){return name.name.toLowerCase().match(event.target.value.toLowerCase());}));}};var handleNewName=function handleNewName(event){setNewName(event.target.value);};var handleNewNumber=function handleNewNumber(event){setNewNumber(event.target.value);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notification,{message:notiMessage,name:notiPerson}),/*#__PURE__*/_jsx(Filter,{newFilter:newFilter,handleFiltering:handleFiltering}),/*#__PURE__*/_jsx(\"h2\",{children:\"add a new\"}),/*#__PURE__*/_jsx(AddNew,{addName:addName,newName:newName,handleNewName:handleNewName,newNumber:newNumber,handleNewNumber:handleNewNumber}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Names,{names:namesToShow,numberService:numberService,setPersons:setPersons,setNamesToShow:setNamesToShow,setNotiMessage:setNotiMessage,setNotiPerson:setNotiPerson}),/*#__PURE__*/_jsx(\"p\",{children:\"test\"})]});};export default App;","map":{"version":3,"names":["useState","useEffect","Names","Filter","AddNew","numberService","Notification","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","persons","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","newFilter","setNewFilter","_useState9","_useState10","namesToShow","setNamesToShow","_useState11","_useState12","notiMessage","setNotiMessage","_useState13","_useState14","notiPerson","setNotiPerson","getAll","then","numbers","nameExists","name","originalName","window","confirm","concat","update","id","names","setTimeout","addName","event","preventDefault","number","map","includes","find","n","create","addedNumber","handleFiltering","target","value","toLowerCase","filter","match","handleNewName","handleNewNumber","children","message"],"sources":["C:/Users/Veikka/Desktop/yliopisto/fullstackopen/fullstackopen/osa2/puhelinluettelo/src/App.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport Names from './components/names'\nimport Filter from './components/filter'\nimport AddNew from './components/addNew'\nimport numberService from './components/numbers'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [namesToShow, setNamesToShow] = useState(persons)\n  const [notiMessage, setNotiMessage] = useState('')\n  const [notiPerson, setNotiPerson] = useState('')\n  \n  useEffect(() => {\n    numberService.getAll()\n      .then(numbers => {\n        setPersons(numbers)\n        setNamesToShow(numbers)\n      })\n  },[])\n\n  const nameExists = (name, originalName) => {\n    if(window.confirm(`${name.name} has already been added to phonebook,\n              replace the old number with a new one?`)){\n        numberService.update(name, originalName.id)\n                .then(numberService.getAll()\n                  .then(\n                    names => {\n                      setPersons(names)\n                      setNamesToShow(names)\n                      setNotiMessage(\"Updated\")\n                      setNotiPerson(name.name)\n                      setTimeout(() => {\n                        setNotiMessage(null)\n                    }, 3000)\n                    }\n                  ))\n      }\n  }\n\n  const addName = (event) => {\n    event.preventDefault()\n    const name = {\n      name: newName,\n      number: newNumber\n    }\n    persons.map(name => name.name).includes(newName)\n      ? nameExists(name, persons.find(n => n.name == newName))\n      : numberService.create(name)\n        .then(addedNumber => {\n          setPersons(persons.concat(addedNumber))\n          setNamesToShow(persons.concat(addedNumber)); {/* add names to filtering */}\n          setNotiMessage(\"Added\")\n          setNotiPerson(name.name)\n          setTimeout(() => {\n            setNotiMessage(null)\n        }, 3000)\n        })\n      \n      \n  }\n\n  const handleFiltering = (event) => {\n    setNewFilter(event.target.value.toLowerCase())\n    if(event.target.value == \"\") {\n      setNamesToShow(persons)\n    } else {\n      setNamesToShow(persons.filter(name => name.name.toLowerCase()\n                    .match(event.target.value.toLowerCase())))\n    }\n  }\n\n  const handleNewName = (event) => {setNewName(event.target.value)}\n  const handleNewNumber = (event) => {setNewNumber(event.target.value)}\n  \n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notiMessage} name={notiPerson}/>\n      <Filter newFilter={newFilter} handleFiltering={handleFiltering} />\n      <h2>add a new</h2>\n      <AddNew addName={addName} newName={newName} handleNewName={handleNewName} \n      newNumber={newNumber} handleNewNumber={handleNewNumber} />\n      <h2>Numbers</h2>\n      <Names names={namesToShow} numberService={numberService} \n      setPersons={setPersons} setNamesToShow={setNamesToShow} \n      setNotiMessage={setNotiMessage} setNotiPerson={setNotiPerson}/>\n      <p>test</p>\n    </div>\n  )\n\n}\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}